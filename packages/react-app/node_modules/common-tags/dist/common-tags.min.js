!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((n=n||self).commonTags=n.commonTags||{})}(this,function(n){"use strict";function p(n){return"".concat(n)}var e="COMMON_TAGS_TAG_TRANSFORMERS_SYMBOL";function o(n){return(r=n,(t=[]).concat.apply(t,r)).reduce(function(n,r){return"function"==typeof(t=r)&&t[e]?[].concat(n,r[e]):[].concat(n,[r]);var t},[]);var r,t}function f(n,e,r){var t=n.transformers,o=n.context;return t.reduce(function(n,r,t){return r[e]?r[e](n,o[t]):n},r)}function r(){for(var n=arguments.length,r=new Array(n),t=0;t<n;t++)r[t]=arguments[t];var u=o(r);function s(n){for(var r=arguments.length,c=new Array(1<r?r-1:0),t=1;t<r;t++)c[t-1]=arguments[t];if("function"==typeof n)return e=s,o=n,function(){return e(["",""],o.apply(void 0,arguments))};var e,o;if(!Array.isArray(n))return s([n]);var i,l={transformers:i=u,context:i.map(function(n){return n.getInitialContext?n.getInitialContext():{}})},a=n.map(function(n){return f(l,"onString",n)}).reduce(function(n,r,t){return"".concat(n,(e=l,o="onSubstitution",i=c[t-1],a=n,u=e.transformers,s=e.context,u.reduce(function(n,r,t){return r[o]?r[o](n,a,s[t]):n},i)),r);var e,o,i,a,u,s});return f(l,"onEndResult",a)}return s[e]=u,s}var t=function(n){var r=void 0===n?{}:n,t=r.conjunction,e=void 0===t?"":t,o=r.separator,f=void 0===o?"":o,i=r.serial,a=void 0!==i&&i;return{onSubstitution:function(n,r){if(!Array.isArray(n))return n;var t=n.length,c=e&&!a?t-2:t-1,l=r.match(/(?:\n)([^\S\n]+)$/);return e&&1<t&&(n[t-1]="".concat(e," ",n[t-1])),n.reduce(function(n,r,t){var e,o,i,a,u=0===t,s=(e=p(r),0<(o=e.length)&&"\n"===e[o-1]?e.slice(0,o-1):e);return"".concat(n,u?"":l?"\n":" ",l?(i=l[1],void 0===(a=u)&&(a=!1),p(s).split("\n").map(function(n,r){return a&&0===r?n:"".concat(i,n)}).join("\n")):s,t<c?f:"")},"")}}},i=function(n){return null!=n&&!Number.isNaN(n)&&"boolean"!=typeof n},a=function(){return{onSubstitution:function(n){return Array.isArray(n)?n.filter(i):i(n)?n:""}}},u=function(r,t){if(null==r||null==t)throw new Error("replaceResultTransformer requires exactly 2 arguments.");return{onEndResult:function(n){return n.replace(r,t)}}},s=function(r,t){if(null==r||null==t)throw new Error("replaceSubstitutionTransformer requires exactly 2 arguments.");return{onSubstitution:function(n){return null==n?n:String(n).replace(r,t)}}},c=function(r){if("string"!=typeof r)throw new Error("You need to specify a string character to split by.");return{onSubstitution:function(n){return"string"==typeof n&&n.includes(r)?n.split(r):n}}},l=["initial","all"],m=function(o){if(void 0===o&&(o="initial"),!l.includes(o))throw new Error("Type not supported: "+o);return{onEndResult:function(n){if("all"===o)return n.replace(/^[^\S\n]+/gm,"");var r=n.match(/^[^\S\n]*(?=\S)/gm),t=r&&Math.min.apply(Math,r.map(function(n){return n.length}));if(t){var e=new RegExp("^.{"+t+"}","gm");return n.replace(e,"")}return n}}},d=["","start","left","end","right","smart"],g=function(r){if(void 0===r&&(r=""),!d.includes(r))throw new Error("Side not supported: "+r);return{onEndResult:function(n){switch(r){case"":return n.trim();case"start":case"left":return n.replace(/^\s*/,"");case"end":case"right":return n.replace(/\s*$/,"");case"smart":return n.replace(/[^\S\n]+$/gm,"").replace(/^\n/,"")}}}},v=r(m(),g("smart")),y=r(c("\n"),a(),t(),v),T=r(t({separator:","}),v),S=r(t({separator:",",conjunction:"and"}),v),h=r(t({separator:",",conjunction:"or"}),v),w=r(),x=r(t(),v),L=r(u(/(?:\n(?:\s*))+/g," "),g()),A=r(t({separator:","}),u(/(?:\s+)/g," "),g()),b=r(t({separator:",",conjunction:"and"}),u(/(?:\s+)/g," "),g()),E=r(t({separator:",",conjunction:"or"}),u(/(?:\s+)/g," "),g()),R=r(t(),u(/(?:\s+)/g," "),g()),j=r(u(/(?:\n\s*)/g,""),g()),M=r(c("\n"),t(),v,s(/&/g,"&amp;"),s(/</g,"&lt;"),s(/>/g,"&gt;"),s(/"/g,"&quot;"),s(/'/g,"&#x27;"),s(/`/g,"&#x60;")),O=r(m("all"),g("smart")),C=!1;n.createTag=r,n.inlineArrayTransformer=t,n.removeNonPrintingValuesTransformer=a,n.replaceResultTransformer=u,n.replaceStringTransformer=function(r,t){if(null==r||null==t)throw new Error("replaceStringTransformer requires exactly 2 arguments.");return{onString:function(n){return n.replace(r,t)}}},n.replaceSubstitutionTransformer=s,n.splitStringTransformer=c,n.stripIndentTransformer=m,n.trimResultTransformer=g,n.codeBlock=y,n.html=y,n.source=y,n.commaLists=T,n.commaListsAnd=S,n.commaListsOr=h,n.id=w,n.inlineLists=x,n.oneLine=L,n.oneLineCommaLists=A,n.oneLineCommaListsAnd=b,n.oneLineCommaListsOr=E,n.oneLineInlineLists=R,n.oneLineTrim=j,n.safeHtml=M,n.stripIndent=v,n.stripIndents=O,n.TemplateTag=function(){return C||(console.warn("TemplateTag is deprecated and will be removed in the next major version. Use createTag instead."),C=!0),r.apply(void 0,arguments)},Object.defineProperty(n,"__esModule",{value:!0})});
